"use strict";(self["webpackChunkblogs"]=self["webpackChunkblogs"]||[]).push([[781],{4781:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var a=n(3396);const c=t=>((0,a.dD)("data-v-3c89fc52"),t=t(),(0,a.Cn)(),t),l=c((()=>(0,a._)("canvas",{id:"mycanvas",width:"800",height:"600"},null,-1))),u=c((()=>(0,a._)("button",{class:"btn-run"},"开始",-1))),o=c((()=>(0,a._)("button",{class:"btn-pause"},"暂停",-1))),s=[l,u,o];function i(t,e,n,c,l,u){return(0,a.wg)(),(0,a.iD)("div",null,s)}n(7658);var r={data(){return{canvas:null}},mounted(){this.canvas=document.getElementById("mycanvas");var t=this.canvas.getContext("2d");const e=600,n=600,a={x:50,y:50,xy:3,speed:2},c={x:200,y:200,bulletSpeed:8},l=[],u=[{x:350,y:350},{x:50,y:350},{x:50,y:50},{x:350,y:50}];function o(){t.font="50px 宋体",t.fillText("塔",c.x,c.y)}function s(){t.font="50px 宋体",t.fillText("敌",a.x,a.y)}var i=0;const r=h((()=>{f()})),x=()=>{i&&cancelAnimationFrame(i),function t(){y(),i=requestAnimationFrame(t)}()};function y(){t.clearRect(0,0,e,n),o(),s(),d(),r(),b()}function o(){t.font="50px 宋体",t.fillText("塔",c.x,c.y)}function s(){t.font="50px 宋体",t.fillText("敌",a.x,a.y)}function d(){const{speed:t,xy:e,x:n,y:c}=a;for(let l=0;l<u.length;l++)if(n>=u[l].x&&n<=u[l].x+t&&c>=u[l].y&&c<=u[l].y+t&&l+1!==a.xy){a.xy=l+1;break}switch(a.xy){case 1:a.x-=t;break;case 2:a.y-=t;break;case 3:a.x+=t;break;case 4:a.y+=t;break}}function f(){const t=50,e=a.x+t/2,n=a.y-t/2,u={x:c.x+t/2,y:c.y-t/2},o={x:e-u.x,y:n-u.y},s=v(o.x,o.y),i=c.bulletSpeed*o.x/s,r=c.bulletSpeed*o.y/s;l.push({x:u.x,y:u.y,addX:i,addY:r,xy:0,distance:s})}function b(){for(let t=l.length-1;t>=0;t--){const{addX:e,addY:n,distance:a}=l[t];l[t].xy>=a?l.splice(t,1):(l[t].x+=e,l[t].y+=n,l[t].xy+=c.bulletSpeed,p(l[t]))}}function p(e){t.save(),t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI,!1),t.fillStyle="skyblue",t.fill(),t.restore()}function h(t){let e=null;return()=>{e||(e=setTimeout((()=>{t(),clearTimeout(e),e=null}),500))}}function v(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}x(),document.querySelector(".btn-run").addEventListener("click",(()=>{x()})),document.querySelector(".btn-pause").addEventListener("click",(()=>{cancelAnimationFrame(i)}))},methods:{}},x=n(89);const y=(0,x.Z)(r,[["render",i],["__scopeId","data-v-3c89fc52"]]);var d=y}}]);
//# sourceMappingURL=781.8ef89f77.js.map